$(function () {
    function a(a) {
        a < 0 && (a = 0);
        var b = 50,
            c = 22,
            d = 16,
            e = 30,
            f = 10;
        a < 90 && (b = parseInt((90 - a) / 90 * 50 + 50, 10)), c *= b / 100, d *= b / 100, e *= b / 100, f *= b / 100;
        var g = 83 * (b / 100),
            h = 308 * (b / 100),
            i = $("header h1"),
            j = $("header h2");
        i.width(h), i.height(g), i.css("marginTop", e), i.css("marginBottom", f), j.css("font-size", b + "%").height(b), j.css("paddingBottom", c), j.css("marginTop", d)
    }

    function q(a) {
        jQuery.scrollTo.window().queue([]).stop(), c.scrollTo(a, 1400)
    }
    var b = 0,
        c = $(window),
        d = $("#about"),
        e = $("#join"),
        f = $("#events"),
        g = $("#projects"),
        z = $("#members"),
        y = $("#contact"),
        h = 170,
        i = {
            "#about": d,
            "#join": e,
            "#events": f,
            "#projects": g,
            "#members": z,
            "#contact": y
        };
    a(c.scrollTop()), c.scroll(function (d) {
        function f() {
            var a = $(".birds"),
                b = parseInt(a.outerWidth()),
                c = parseInt(a.css("background-position").split(" ")[0]),
                d = c - b;
            a.css("background-position", d + "px 0px")
        }
        var e = c.scrollTop();
        a(e), f(), b = e
    });
    var j = 0,
        k = !0,
        l = 0;
    c.mousemove(function (a) {
        function c() {
            if (l > 10 && b > j) {
                var a = $(".gargoyles"),
                    c = parseInt(a.outerWidth()),
                    d = parseInt(a.css("background-position").split(" ")[0]),
                    e = d - c;
                a.css("background-position", e + "px 0px"), l = 0
            } else if (l > 10) {
                var a = $(".gargoyles"),
                    c = parseInt(a.outerWidth()),
                    d = parseInt(a.css("background-position").split(" ")[0]),
                    e = d + c;
                a.css("background-position", e + "px 0px"), l = 0
            } else l++
        }

        function d() {
            if (k && b > j) {
                var a = $(".mini"),
                    c = parseInt(a.css("transform").rotate * (180 / Math.PI));
                if (c < 12) {
                    var d = c + 1;
                    a.css("transform", "rotate(" + d + "deg)")
                }
            } else if (k) {
                var a = $(".mini"),
                    c = parseInt(a.css("transform").rotate * (180 / Math.PI));
                if (c > -2) {
                    var d = c - 1;
                    a.css("transform", "rotate(" + d + "deg)")
                }
            }
        }
        var b = a.pageY;
        d(), c(), j = b
    });
    var m = !0,
        n = null;
    "DeviceOrientationEvent" in window && window.addEventListener("deviceorientation", function (a) {
        k = !1;
        var b = a.gamma,
            d = a.beta;
        n || (n = a.beta), d -= n;
        var e = null;
        m && d > -3 && d < 30 && (e = $("#mini"), e.css("transform", "rotate(" + d + "deg)"));
        if (m && d > 30) {
            m = !1;
            var f = $("footer");
            e || (e = $("#mini"));
            var g = 4e3;
            jQuery.scrollTo.window().queue([]).stop(), c.scrollTo(f, g, {
                easing: "linear"
            });
            var h = parseInt(f.offset().top) - parseInt(e.offset().top) - e.outerHeight();
            e.animate({
                transform: "rotate(180deg) translateY(" + h + "px)"
            }, {
                easing: "linear",
                duration: g,
                complete: function () {
                    $(this).addClass("crashed")
                }
            })
        }
    }, !1);
    var o = $("nav.primary"),
        p = {
            about: o.children("a.about"),
            join: o.children("a.join"),
            events: o.children("a.events"),
            projects: o.children("a.projects"),
            members: o.children("a.members"),
            contact: o.children("a.contact")
        };
    c.bind("scroll", function () {
        var a = c.scrollTop() + 100;
        a > i["#contact"].offset().top - h ? (o.children("a.selected").removeClass("selected"), p.sponsors.addClass("selected")) : a > i["#members"].offset().top - h ? (o.children("a.selected").removeClass("selected"), p.workshops.addClass("selected")) : a > i["#venue"].offset().top - h ? (o.children("a.selected").removeClass("selected"), p.venue.addClass("selected")) : a > i["#speakers"].offset().top - h ? (o.children("a.selected").removeClass("selected"), p.speakers.addClass("selected")) : a < 410 && o.children("a.selected").removeClass("selected")
    }), $("nav.primary a").click(function () {
        var a = $(this);
        return jQuery.scrollTo.window().queue([]).stop(), c.scrollTo(i[this.hash].offset().top - h, 1400, {
            easing: "swing",
            onAfter: function () {}
        }), !1
    }), $("footer nav.sections a").click(function () {
        var a = $(this.hash).offset().top - 140;
        return q(a), !1
    }), $(".scroll").click(function () {
        var a = $(this.hash).offset().top - 140;
        return q(a), !1
    }), $("header h1 a").click(function () {
        return jQuery.scrollTo.window().queue([]).stop(), c.scrollTo(0, 1400), !1
    }), $(".more").one("inview", function () {
        $(this).simpleAnimation({
            framerate: 4
        })
    }), $(".radiohead").one("inview", function () {
        $(this).simpleAnimation({
            framerate: 3
        })
    }), $(".heads").one("inview", function () {
        $(this).simpleAnimation({
            framerate: 6
        })
    }), $(".caterpillar").one("inview", function () {
        $(this).simpleAnimation({
            framerate: 3.5,
            pauseTime: "1500"
        })
    }), $(".shark").one("inview", function () {
        $(this).simpleAnimation({
            framerate: 4
        })
    }), $(".no-touch #container").scrollParallax({
        speed: -0.2,
        axis: "y"
    }), $(".no-touch #foreground").scrollParallax({
        speed: -0.4,
        axis: "y"
    });
});